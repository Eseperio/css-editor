# Internationalization (i18n)

The CSS Editor supports multiple languages through a JSON-based translation system with automatic browser locale detection.

## Available Locales

- `en` - English (default)
- `es-ES` - Spanish (Spain)

## Usage

### Automatic Locale Detection

By default, the CSS Editor automatically detects the browser's language preference:

```javascript
// No locale specified - will auto-detect from browser
const editor = new CSSEditor.CSSEditor();
editor.init();
```

The editor will:
1. Check the browser's language setting (`navigator.language`)
2. Match it to a supported locale (e.g., 'es' → 'es-ES')
3. Fall back to English if the browser language is not supported

### Setting Locale on Initialization

You can override the auto-detection by explicitly setting a locale:

```javascript
const editor = new CSSEditor.CSSEditor({
  locale: 'es-ES'  // Use Spanish, ignoring browser preference
});
```

### Changing Locale via UI

Users can change the language using the dropdown selector in the panel header:
- Click the language dropdown (shows current locale name: "English" or "Español")
- Select the desired language
- The panel automatically updates with the new translations

### Changing Locale Programmatically

You can also change the locale after initialization:

```javascript
// Import the setLocale function
import { setLocale } from 'css-editor';

// Or if using UMD bundle
CSSEditor.setLocale('en');  // Switch to English
CSSEditor.setLocale('es-ES');  // Switch to Spanish
```

### Getting Current Locale

```javascript
import { getLocale } from 'css-editor';

const currentLocale = getLocale();
console.log(currentLocale); // 'en' or 'es-ES'
```

### Getting Available Locales

```javascript
import { getAvailableLocales } from 'css-editor';

const locales = getAvailableLocales();
console.log(locales); // ['en', 'es-ES']
```

### Getting Locale Display Name

```javascript
import { getLocaleName } from 'css-editor';

console.log(getLocaleName('en'));     // "English"
console.log(getLocaleName('es-ES'));  // "Español"
```

## Translation Coverage

The translation system covers:

1. **UI Elements**
   - Panel title and headers
   - Language selector dropdown
   - Button labels (Save CSS, Export CSS, Clear Changes, etc.)
   - Messages and alerts
   - Input placeholders
   - Tooltips

2. **Property Names**
   - All CSS property names are translated
   - Examples: `margin` → `margen`, `padding` → `relleno`, `width` → `ancho`

3. **Property Groups**
   - Group names are translated
   - Examples: `Spacing` → `Espaciado`, `Typography` → `Tipografía`

4. **Filter Options**
   - Filter types are translated
   - Examples: `Blur` → `Desenfoque`, `Brightness` → `Brillo`

## Adding New Languages

To add a new language:

1. Create a new JSON file in `src/i18n/locales/` (e.g., `fr.json` for French)
2. Copy the structure from `en.json` or `es-ES.json`
3. Translate all values
4. Import the new translations in `src/i18n/index.ts`:

```typescript
import frTranslations from './locales/fr.json';

// Add to translations object
const translations: Record<Locale, Translations> = {
  'en': enTranslations as Translations,
  'es-ES': esESTranslations as Translations,
  'fr': frTranslations as Translations,  // Add new locale
};
```

5. Update the `Locale` type to include the new locale:

```typescript
export type Locale = 'en' | 'es-ES' | 'fr';
```

## Translation File Structure

Each translation file follows this structure:

```json
{
  "localeName": "English",
  "ui": {
    "panel": {
      "title": "CSS Editor",
      "close": "Close",
      "selector": "Selector",
      "language": "Language",
      ...
    },
    "propertySelector": { ... },
    "spacing": { ... },
    "messages": { ... },
    "inputs": { ... },
    "filters": { ... }
  },
  "properties": {
    "color": "color",
    "margin": "margin",
    ...
  },
  "propertyGroups": {
    "Spacing": "Spacing",
    "Border": "Border",
    ...
  }
}
```

**Key fields:**
- `localeName`: Native name of the locale (displayed in language selector)
- `ui.panel.language`: Label for the language selector dropdown

## Variable Interpolation

Translation strings support simple variable interpolation using `{variableName}` syntax:

```json
{
  "selectorMatchCount": "{count} elements match the selector"
}
```

Usage in code:

```typescript
t('ui.panel.selectorMatchCount', { count: '5' })
// Returns: "5 elements match the selector"
```

## Screenshots

### English with Locale Selector
![English interface with language dropdown](https://github.com/user-attachments/assets/5b51a14a-88a4-472e-a90c-39cbec8394e9)

### Spanish (es-ES)
![Spanish interface after locale switch](https://github.com/user-attachments/assets/93cf9376-02dd-4412-ab7f-e43819ca50df)

### English (en)
![English Interface](https://github.com/user-attachments/assets/0dccda2f-8cf1-4b35-a749-57b3d862dad8)
